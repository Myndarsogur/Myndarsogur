<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8" />
  <title>Blaðalestari</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    @font-face {
      font-family: "Luke";
      src:
        url("fonts/Luke_thin_200.woff2") format("woff2"),
        url("fonts/Luke_thin_200.otf") format("opentype");
      font-weight: 200;
      font-style: normal;
      font-display: swap;
      font-synthesis: none;
    }

    :root {
      --page-ratio: 0.643; /* 254mm / 395mm */
      --page-inv-ratio: 1.555;
      --gap: clamp(8px, 1.5vw, 18px);
      --radius: 12px;
      --ink: #0b0d14;
      --paper: #ffffff;
      --line: #d8d8d8;
      --swatch-1: #f4d06f;
      --swatch-2: #ff9770;
      --swatch-3: #e56b6f;
      --swatch-4: #7bdff2;
      --swatch-5: #c5e99b;
      --swatch-6: #cdb4db;
      --swatch-7: #ffc8dd;
      --swatch-8: #a0c4ff;
      --swatch-9: #9cf6f6;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      font-family: "Helvetica Neue", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #ffffff;
      color: #0b0d14;
      overflow: hidden; /* engin lóðrétt scroll */
    }

    .viewer {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
    }

    .pages {
      display: flex;
      width: 100%;
      height: 100%;
      overflow-x: auto;
      overflow-y: hidden;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior-x: contain;
    }

    .page {
      flex: 0 0 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      scroll-snap-align: center;
      padding: clamp(12px, 3vw, 32px);
    }

    .page-inner {
      position: relative;
      width: min(100vw, calc(100vh * var(--page-ratio)));
      height: min(100vh, calc(100vw * var(--page-inv-ratio)));
      aspect-ratio: 254 / 395;
      background: var(--paper);
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: 0 18px 60px rgba(0, 0, 0, 0.35), 0 2px 14px rgba(0, 0, 0, 0.45);
      padding: var(--gap);
      display: flex;
      flex-direction: column;
      gap: var(--gap);
      overflow: hidden;
    }

    .page-grid {
      display: grid;
      width: 100%;
      flex: 1;
      min-height: 0;
      gap: var(--gap);
    }

    .article {
      position: relative;
      border-radius: var(--radius);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: clamp(6px, 1vw, 12px);
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
    }

    .article:hover,
    .article:focus-visible {
      transform: translateY(-2px);
      border-color: rgba(255, 255, 255, 0.3);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.25);
      outline: none;
    }

    .article span {
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: clamp(0.7rem, 1.4vw, 0.95rem);
      color: #0d0d0f;
      opacity: 0.8;
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.35);
    }

    .tone-1 { background: var(--swatch-1); }
    .tone-2 { background: var(--swatch-2); }
    .tone-3 { background: var(--swatch-3); }
    .tone-4 { background: var(--swatch-4); }
    .tone-5 { background: var(--swatch-5); }
    .tone-6 { background: var(--swatch-6); }
    .tone-7 { background: var(--swatch-7); }
    .tone-8 { background: var(--swatch-8); }
    .tone-9 { background: var(--swatch-9); }

    /* ----- LAYOUT TEMPLATES ----- */
    /* Forsíða: titill efst, mjó lóðrétt grein og tvær láréttar við hliðina */
    .layout-cover {
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: 1fr 0.55fr; /* Stór kassalaga grein + þrjár minni undir */
      grid-template-areas:
        "banner banner banner"
        "sidebar leads leads";
    }
    .layout-cover .banner { grid-area: banner; }
    .layout-cover .sidebar { grid-area: sidebar; }
    .layout-cover .leads {
      grid-area: leads;
      display: grid;
      grid-template-rows: 0.55fr 0.45fr; /* Forsíðugrein A ofan á B, bæði láréttar */
      gap: var(--gap);
    }

    /* 1/3 efst, síðan 1/3 + 2/3, svo botninn tekinn alla breidd */
    .layout-thirds {
      grid-template-columns: 1fr 2fr;
      grid-template-rows: 1fr 1fr 1fr;
      grid-template-areas:
        "hero hero"
        "small wide"
        "bottom bottom";
    }
    .layout-thirds .hero { grid-area: hero; }
    .layout-thirds .small { grid-area: small; }
    .layout-thirds .wide { grid-area: wide; }
    .layout-thirds .bottom { grid-area: bottom; }

    /* Lang grein vinstra megin; hægra megin 2/3 + 2/3 + tvær 1/3 niðri */
    .layout-left-rail {
      grid-template-columns: 1fr 2fr;
      grid-template-rows: 1fr;
      align-items: stretch;
    }
    .layout-left-rail .rail {
      height: 100%;
    }
    .layout-left-rail .right {
      display: grid;
      grid-template-rows: 1fr 1fr 1fr;
      gap: var(--gap);
      height: 100%;
    }
    .layout-left-rail .bottom-pair {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
    }

    /* Efri helmingur einn; neðri helmingur tvær jafn stórar */
    .layout-half-split {
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      grid-template-areas:
        "hero hero"
        "half1 half2";
    }
    .layout-half-split .hero { grid-area: hero; }
    .layout-half-split .half1 { grid-area: half1; }
    .layout-half-split .half2 { grid-area: half2; }

    /* Efri helmingur einn; neðri með 2/3 + 1/3 */
    .layout-half-weighted {
      grid-template-columns: 2fr 1fr;
      grid-template-rows: 1fr 1fr;
      grid-template-areas:
        "hero hero"
        "big small";
    }
    .layout-half-weighted .hero { grid-area: hero; }
    .layout-half-weighted .big { grid-area: big; }
    .layout-half-weighted .small { grid-area: small; }

    /* 3x3 jöfnum ferningum */
    .layout-nine-equal {
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
    }

    /* Frjáls 9-greina moska */
    .layout-nine-mosaic {
      grid-template-columns: 1.2fr 1fr 1fr 1fr;
      grid-template-rows: repeat(3, 1fr);
      grid-template-areas:
        "m1 m1 m2 m3"
        "m4 m5 m5 m6"
        "m7 m8 m9 m9";
    }
    .layout-nine-mosaic .m1 { grid-area: m1; }
    .layout-nine-mosaic .m2 { grid-area: m2; }
    .layout-nine-mosaic .m3 { grid-area: m3; }
    .layout-nine-mosaic .m4 { grid-area: m4; }
    .layout-nine-mosaic .m5 { grid-area: m5; }
    .layout-nine-mosaic .m6 { grid-area: m6; }
    .layout-nine-mosaic .m7 { grid-area: m7; }
    .layout-nine-mosaic .m8 { grid-area: m8; }
    .layout-nine-mosaic .m9 { grid-area: m9; }

    /* Lokasíða: 1/3 efst, 2/3 neðst skipt 1/3 + 2/3 */
    .layout-last {
      grid-template-columns: 1fr 2fr;
      grid-template-rows: 1fr 2fr;
      grid-template-areas:
        "top top"
        "left right";
    }
    .layout-last .top { grid-area: top; }
    .layout-last .left { grid-area: left; }
    .layout-last .right { grid-area: right; }

    /* Forsíða letur og titill */
    .page[data-page="1"] .page-grid {
      padding-top: 0;
    }

    .banner {
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: clamp(12px, 3vw, 32px);
    }

    .headline {
      display: flex;
      flex-direction: column;
      gap: clamp(6px, 1vw, 10px);
      width: 100%;
      color: #0d0d0f;
    }

    .headline-main {
      font-family: "Luke", "Helvetica Neue", system-ui, sans-serif;
      font-weight: 200;
      letter-spacing: 0.08em;
      font-size: clamp(1.4rem, 4vw, 2.4rem);
      text-transform: uppercase;
      line-height: 1.1;
    }

    .headline-sub {
      font-family: "Helvetica Neue", system-ui, sans-serif;
      font-weight: 400;
      letter-spacing: 0.02em;
      font-size: clamp(0.78rem, 1.6vw, 0.95rem);
      text-transform: none;
      color: #0b0d14;
    }

    .title-bar {
      width: 100%;
      text-align: center;
    }

    .title-chip {
      display: inline-block;
      padding: clamp(6px, 1.5vw, 12px) clamp(10px, 2vw, 18px);
      background: #ffffff;
      color: #0b0d14;
      font-family: "Luke", "Helvetica Neue", system-ui, sans-serif;
      font-weight: 200;
      letter-spacing: 0.14em;
      font-size: clamp(2.3rem, 7vw, 4rem);
      border: none;
      cursor: pointer;
      transition: transform 0.16s ease;
    }

    .title-chip:hover,
    .title-chip:focus-visible {
      transform: translateY(-2px);
      outline: none;
    }

    .about-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.18s ease;
      z-index: 60;
    }

    .about-modal.active {
      opacity: 1;
      pointer-events: auto;
    }

    .about-card {
      background: #f5f5f7;
      border: 1px solid #dcdcdc;
      border-radius: 14px;
      padding: 20px 22px;
      width: min(320px, 82vw);
      color: #0b0d14;
      box-shadow: 0 18px 48px rgba(0, 0, 0, 0.25);
      font-family: "Helvetica Neue", system-ui, sans-serif;
      font-weight: 400;
      line-height: 1.5;
    }

    .about-card h2 {
      margin-bottom: 8px;
      font-size: 1.05rem;
      letter-spacing: 0.04em;
      text-transform: none;
    }

    .about-card p {
      font-size: 0.95rem;
      letter-spacing: 0.01em;
      color: #1f1f23;
    }

    .about-close {
      margin-top: 14px;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      color: #f6f6fb;
      cursor: pointer;
      font-family: inherit;
      font-weight: 200;
      letter-spacing: 0.04em;
    }

    .about-close:hover,
    .about-close:focus-visible {
      background: rgba(255, 255, 255, 0.2);
      outline: none;
    }

    /* Yfirlag þegar grein opnast */
    .article-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.92);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 50;
    }

    .article-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }

    .article-overlay-inner {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      overflow: hidden;
      touch-action: none;
    }

    .article-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      transform-origin: center center;
      transition: transform 0.12s ease-out;
    }

    .overlay-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      padding: 0.25rem 0.6rem;
      font-size: 1.5rem;
      line-height: 1;
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.5);
      color: #fff;
      cursor: pointer;
      border-radius: 999px;
    }

    .page-indicator {
      position: fixed;
      bottom: 0.75rem;
      left: 50%;
      transform: translateX(-50%);
      padding: 0.35rem 0.85rem;
      background: rgba(0, 0, 0, 0.65);
      border-radius: 999px;
      font-size: 0.82rem;
      letter-spacing: 0.04em;
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(6px);
    }
  </style>
</head>
<body>
  <div class="viewer">
    <div class="pages" id="pages">
      <!-- SÍÐA 1: FORSÍÐA -->
      <section class="page" data-page="1">
        <div class="page-inner">
          <div class="title-bar">
            <button class="title-chip" id="aboutOpen">The Arctic Comics Journal</button>
          </div>
          <div class="page-grid layout-cover">
            <button class="article banner tone-1" data-article-src="page1/title.jpg">
              <div class="headline">
                <div class="headline-main">Forsíða aðal</div>
              </div>
            </button>
            <button class="article sidebar tone-2" data-article-src="page1/sidebar.jpg">
              <span>Hliðargrein</span>
            </button>
            <div class="leads">
              <button class="article lead1 tone-3" data-article-src="page1/lead-1.jpg">
                <span>Forsíðu grein A</span>
              </button>
              <button class="article lead2 tone-4" data-article-src="page1/lead-2.jpg">
                <span>Forsíðu grein B</span>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- SÍÐA 2: 1/3 + 1/3+2/3 + fullur botn -->
      <section class="page" data-page="2">
        <div class="page-inner">
          <div class="page-grid layout-thirds">
            <button class="article hero tone-5" data-article-src="page2/top.jpg">
              <span>Grein efst</span>
            </button>
            <button class="article small tone-6" data-article-src="page2/mid-small.jpg">
              <span>Neðri 1/3</span>
            </button>
            <button class="article wide tone-7" data-article-src="page2/mid-wide.jpg">
              <span>Neðri 2/3</span>
            </button>
            <button class="article bottom tone-8" data-article-src="page2/bottom.jpg">
              <span>Botninn</span>
            </button>
          </div>
        </div>
      </section>

      <!-- SÍÐA 3: Lóðrétt 1/3 + hægra megin 2/3 + 2/3 + tvær 1/3 -->
      <section class="page" data-page="3">
        <div class="page-inner">
          <div class="page-grid layout-left-rail">
            <button class="article rail tone-1" data-article-src="page3/left-rail.jpg">
              <span>Lang grein</span>
            </button>
            <div class="right">
              <button class="article tone-2" data-article-src="page3/right-top.jpg">
                <span>2/3 topp</span>
              </button>
              <button class="article tone-3" data-article-src="page3/right-mid.jpg">
                <span>2/3 miðja</span>
              </button>
              <div class="bottom-pair">
                <button class="article tone-4" data-article-src="page3/bottom-left.jpg">
                  <span>1/3</span>
                </button>
                <button class="article tone-5" data-article-src="page3/bottom-right.jpg">
                  <span>1/3</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- SÍÐA 4: Helmingur + tvær neðri -->
      <section class="page" data-page="4">
        <div class="page-inner">
          <div class="page-grid layout-half-split">
            <button class="article hero tone-6" data-article-src="page4/top-half.jpg">
              <span>Helmingur</span>
            </button>
            <button class="article half1 tone-7" data-article-src="page4/bottom-a.jpg">
              <span>Neðri A</span>
            </button>
            <button class="article half2 tone-8" data-article-src="page4/bottom-b.jpg">
              <span>Neðri B</span>
            </button>
          </div>
        </div>
      </section>

      <!-- SÍÐA 5: Helmingur + (2/3 + 1/3) -->
      <section class="page" data-page="5">
        <div class="page-inner">
          <div class="page-grid layout-half-weighted">
            <button class="article hero tone-9" data-article-src="page5/top-half.jpg">
              <span>Helmingur</span>
            </button>
            <button class="article big tone-1" data-article-src="page5/big.jpg">
              <span>2/3</span>
            </button>
            <button class="article small tone-2" data-article-src="page5/small.jpg">
              <span>1/3</span>
            </button>
          </div>
        </div>
      </section>

      <!-- SÍÐA 6: 9 jafnir ferningar -->
      <section class="page" data-page="6">
        <div class="page-inner">
          <div class="page-grid layout-nine-equal">
            <button class="article tone-3" data-article-src="page6/1.jpg"><span>1</span></button>
            <button class="article tone-4" data-article-src="page6/2.jpg"><span>2</span></button>
            <button class="article tone-5" data-article-src="page6/3.jpg"><span>3</span></button>
            <button class="article tone-6" data-article-src="page6/4.jpg"><span>4</span></button>
            <button class="article tone-7" data-article-src="page6/5.jpg"><span>5</span></button>
            <button class="article tone-8" data-article-src="page6/6.jpg"><span>6</span></button>
            <button class="article tone-9" data-article-src="page6/7.jpg"><span>7</span></button>
            <button class="article tone-1" data-article-src="page6/8.jpg"><span>8</span></button>
            <button class="article tone-2" data-article-src="page6/9.jpg"><span>9</span></button>
          </div>
        </div>
      </section>

      <!-- SÍÐA 7: 9 greinar í mosku -->
      <section class="page" data-page="7">
        <div class="page-inner">
          <div class="page-grid layout-nine-mosaic">
            <button class="article m1 tone-4" data-article-src="page7/1.jpg"><span>1</span></button>
            <button class="article m2 tone-5" data-article-src="page7/2.jpg"><span>2</span></button>
            <button class="article m3 tone-6" data-article-src="page7/3.jpg"><span>3</span></button>
            <button class="article m4 tone-7" data-article-src="page7/4.jpg"><span>4</span></button>
            <button class="article m5 tone-8" data-article-src="page7/5.jpg"><span>5</span></button>
            <button class="article m6 tone-9" data-article-src="page7/6.jpg"><span>6</span></button>
            <button class="article m7 tone-1" data-article-src="page7/7.jpg"><span>7</span></button>
            <button class="article m8 tone-2" data-article-src="page7/8.jpg"><span>8</span></button>
            <button class="article m9 tone-3" data-article-src="page7/9.jpg"><span>9</span></button>
          </div>
        </div>
      </section>

      <!-- SÍÐA 8: Lokasíða 1/3 + (1/3 + 2/3) -->
      <section class="page" data-page="8">
        <div class="page-inner">
          <div class="page-grid layout-last">
            <button class="article top tone-1" data-article-src="page8/top.jpg">
              <span>Efst 1/3</span>
            </button>
            <button class="article left tone-5" data-article-src="page8/bottom-1of3.jpg">
              <span>Botn 1/3</span>
            </button>
            <button class="article right tone-6" data-article-src="page8/bottom-2of3.jpg">
              <span>Botn 2/3</span>
            </button>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- YFIRLAGIÐ (PHOTO VIEWER FYRIR GREIN) -->
  <div class="article-overlay" id="articleOverlay">
    <div class="article-overlay-inner" id="overlayInner">
      <button class="overlay-close" id="overlayClose" aria-label="Loka">&times;</button>
      <img class="article-image" id="articleImage" src="" alt="Grein" />
    </div>
  </div>

  <div class="about-modal" id="aboutModal">
    <div class="about-card">
      <h2>The Arctic Comics Journal</h2>
      <p>Þetta er tímarit tileinkað myndasöguforminu. Hérna getur þú lesið greinar og fræðst og skoðað meira. Fyrsta tölublað 1. desember 2025. Takk fyrir.</p>
      <button class="about-close" id="aboutClose">Loka</button>
    </div>
  </div>

  <div class="page-indicator" id="pageIndicator">Síða 1 / 8</div>

  <script>
    // --- Opna / loka greinum ---
    const overlay = document.getElementById("articleOverlay");
    const overlayInner = document.getElementById("overlayInner");
    const articleImage = document.getElementById("articleImage");
    const overlayClose = document.getElementById("overlayClose");

    let currentScale = 1;
    const MIN_SCALE = 1;
    const MAX_SCALE = 3;

    function openArticle(src) {
      if (!src) return;
      articleImage.src = src;
      currentScale = 1;
      articleImage.style.transform = "scale(1)";
      overlay.classList.add("active");
    }

    function closeArticle() {
      overlay.classList.remove("active");
      articleImage.src = "";
    }

    document.querySelectorAll(".article").forEach((card) => {
      card.addEventListener("click", () => {
        const src = card.dataset.articleSrc;
        openArticle(src);
      });
    });

    overlayClose.addEventListener("click", closeArticle);

    // loka með því að smella á dimma bakgrunninn
    overlay.addEventListener("click", (e) => {
      if (e.target === overlay) {
        closeArticle();
      }
    });

    // --- Einfaldur tvísmellir / tvítap zoom inn / út ---
    let lastTap = 0;

    overlayInner.addEventListener("click", (e) => {
      const now = Date.now();
      const delta = now - lastTap;

      // ef tvísmellt innan 300ms
      if (delta < 300) {
        if (currentScale === MIN_SCALE) {
          currentScale = Math.min(2, MAX_SCALE);
        } else {
          currentScale = MIN_SCALE;
        }
        articleImage.style.transform = `scale(${currentScale})`;
      }

      lastTap = now;
    });

    // --- Uppfæra síðu-indicator þegar svæpt er ---
    const pagesEl = document.getElementById("pages");
    const pageIndicator = document.getElementById("pageIndicator");
    const pageSections = Array.from(document.querySelectorAll(".page"));

    function updatePageIndicator() {
      const viewportWidth = pagesEl.clientWidth;
      const scrollLeft = pagesEl.scrollLeft;
      const index = Math.round(scrollLeft / viewportWidth);
      const currentPage = (pageSections[index]?.dataset.page) || (index + 1);
      const totalPages = pageSections.length;
      pageIndicator.textContent = `Síða ${currentPage} / ${totalPages}`;
    }

    pagesEl.addEventListener("scroll", () => {
      window.requestAnimationFrame(updatePageIndicator);
    });

    // fyrsta stilling
    updatePageIndicator();

    // About modal
    const aboutOpen = document.getElementById("aboutOpen");
    const aboutModal = document.getElementById("aboutModal");
    const aboutClose = document.getElementById("aboutClose");

    function openAbout() {
      aboutModal.classList.add("active");
    }

    function closeAbout() {
      aboutModal.classList.remove("active");
    }

    aboutOpen.addEventListener("click", openAbout);
    aboutClose.addEventListener("click", closeAbout);
    aboutModal.addEventListener("click", (e) => {
      if (e.target === aboutModal) closeAbout();
    });
  </script>
</body>
</html>
