<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="utf-8" />
  <title>Quill – lítill download-hnappur</title>

  <!-- Quill Snow CSS -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />

  <!-- Font Awesome til að nota niðurhalstákn (valfrjálst) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    integrity="sha512-acJkc+HJRfzNYc6jSuo+z6C0fkLn/u9oM6Dl7VYYGn7CdAzrOg2D8EC9Ofb60E+HjVOxuKVKCBPDp5f3m9b1wA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    /* Quill-editor fyllir síðan gluggann */
    #editor {
      height: 100%;
    }

    /* Fljótandi hnappur, neðst til hægri */
    .floating-download-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007BFF;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      cursor: pointer;
      font-size: 24px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999; /* svo hnappur sé ofan á ritilnum */
      outline: none;
    }

    .floating-download-btn:hover {
      background-color: #0056b3; /* dekkra blátt */
    }
  </style>
</head>
<body>

  <!-- Quill ritillinn -->
  <div id="editor"></div>

  <!-- Fljótandi niðurhalshnappur (táknið er valfrjálst) -->
  <button class="floating-download-btn" id="downloadBtn">
    <i class="fas fa-download"></i>
  </button>

  <!-- Quill JS -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script>
    // Búum til Quill-ritil með tækjum (m.a. myndainnsetningu)
    var quill = new Quill('#editor', {
      theme: 'snow',
      modules: {
        toolbar: [
          [{ header: [1, 2, 3, false] }],
          ['bold', 'italic', 'underline', 'strike'],
          ['link', 'image'],
          ['clean']
        ]
      }
    });

    // Sækjum hnappinn úr DOM
    var downloadButton = document.getElementById('downloadBtn');
    
    downloadButton.addEventListener('click', function() {
      // 1. Sækja HTML-efni úr Quill
      var innihald = quill.root.innerHTML;
      // 2. Búa til Blob úr innihaldinu
      var blob = new Blob([innihald], { type: 'text/html' });
      var url = URL.createObjectURL(blob);

      // 3. Búa til ósýnilegan <a> til að hefja niðurhal
      var hiddenLink = document.createElement('a');
      hiddenLink.href = url;
      hiddenLink.download = 'skjal.html'; // Nafn á skrá sem halast niður
      hiddenLink.click();

      // 4. Hreinsa
      URL.revokeObjectURL(url);
    });
  </script>
</body>
</html>
